"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{3370:(e,t,r)=>{r.d(t,{t:()=>v});var a=r(5155),i=r(5740),s=r(6983),o=r(1169),n=r(7910),l=r(5229),d=r(2619),c=r.n(d),u=r(6199),g=r(2115),m=r(3998),h=r(6948);function v(e){let{trigger:t="value-based",context:r="general",onDismiss:d}=e,{data:v}=(0,u.wV)(),[b,p]=(0,g.useState)(!1),[x,f]=(0,g.useState)(0);if((0,g.useEffect)(()=>{if(!v)switch(t){case"time-based":setTimeout(()=>p(!0),3e4);break;case"action-based":x>=3&&p(!0);break;case"value-based":setTimeout(()=>p(!0),2e3)}},[v,t,x]),(0,g.useEffect)(()=>{document.querySelectorAll("button, a[href]").forEach(e=>{e.addEventListener("click",()=>{f(e=>e+1)})})},[]),v||!b)return null;let w=(()=>{switch(r){case"quote":return{icon:(0,a.jsx)(i.A,{className:"h-8 w-8 text-emerald-500"}),title:"見積もりを保存しませんか？",description:"アカウントを作成すると、作成した見積もりを保存して後で確認できます。",benefits:["見積もりの保存","比較機能","専門カウンセラーとの相談"]};case"consultation":return{icon:(0,a.jsx)(s.A,{className:"h-8 w-8 text-blue-500"}),title:"相談予約をスムーズに",description:"ログインすると、相談履歴の確認や次回予約が簡単になります。",benefits:["予約履歴の確認","リマインダー通知","パーソナライズされた提案"]};case"dashboard":return{icon:(0,a.jsx)(o.A,{className:"h-8 w-8 text-purple-500"}),title:"あなた専用の留学プランを",description:"ダッシュボードで留学準備の進捗を一元管理できます。",benefits:["進捗の可視化","個別サポート","カスタマイズされた情報"]};default:return{icon:(0,a.jsx)(n.A,{className:"h-8 w-8 text-orange-500"}),title:"より良い留学体験を",description:"アカウントを作成すると、パーソナライズされたサポートを受けられます。",benefits:["個別カウンセリング","進捗管理","優先サポート"]}}})();return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:(0,a.jsx)(h.Zp,{className:"max-w-md w-full shadow-2xl border-0 bg-white/95 backdrop-blur-xl",children:(0,a.jsx)(h.Wu,{className:"p-0",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>{p(!1),null==d||d()},className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors z-10",children:(0,a.jsx)(l.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-full mb-6 shadow-lg",children:w.icon}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:w.title}),(0,a.jsx)("p",{className:"text-gray-600 mb-6 leading-relaxed",children:w.description}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-4 mb-6",children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-4 w-4 text-blue-500"}),"ログインの特典"]}),(0,a.jsx)("ul",{className:"space-y-2 text-sm text-gray-600",children:w.benefits.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),e]},t))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-400 rounded-xl blur opacity-30 group-hover:opacity-50 transition-opacity"}),(0,a.jsx)(m.$,{asChild:!0,className:"relative w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:(0,a.jsx)(c(),{href:"/auth/signin",children:"\uD83D\uDE80 ログインして始める"})})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"アカウントをお持ちでない場合は "}),(0,a.jsx)(c(),{href:"/auth/signup",className:"text-sm text-blue-600 hover:text-blue-700 font-semibold hover:underline",children:"新規登録"})]}),(0,a.jsx)(m.$,{variant:"ghost",onClick:()=>{p(!1),null==d||d()},className:"w-full text-gray-500 hover:text-gray-700",children:"後で登録する"})]})]})]})})})})}},3998:(e,t,r)=>{r.d(t,{$:()=>l});var a=r(5155),i=r(2467),s=r(3101);r(2115);var o=r(4269);let n=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive active:scale-95 hover:scale-[1.02]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",brand:"bg-gradient-to-r from-indigo-600 to-blue-500 text-white shadow-sm hover:from-indigo-500 hover:to-blue-400 focus-visible:ring-indigo-300",gradient:"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl hover:from-blue-600 hover:to-purple-700 transform hover:-translate-y-0.5 transition-all duration-300",success:"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg hover:shadow-xl hover:from-emerald-600 hover:to-green-700 transform hover:-translate-y-0.5 transition-all duration-300",warning:"bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-lg hover:shadow-xl hover:from-amber-600 hover:to-orange-700 transform hover:-translate-y-0.5 transition-all duration-300",premium:"bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-2xl hover:shadow-3xl hover:from-violet-600 hover:to-purple-700 transform hover:scale-105 hover:-translate-y-1 transition-all duration-300 border border-white/20",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",xl:"h-12 rounded-lg px-8 text-base has-[>svg]:px-6",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:s,asChild:l=!1,...d}=e,c=l?i.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,o.cn)(n({variant:r,size:s,className:t})),...d})}},4269:(e,t,r)=>{r.d(t,{cn:()=>s});var a=r(2821),i=r(5889);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,i.QP)((0,a.$)(t))}},6948:(e,t,r)=>{r.d(t,{Wu:()=>l,ZB:()=>n,Zp:()=>s,aR:()=>o});var a=r(5155);r(2115);var i=r(4269);function s(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,i.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,i.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,i.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,i.cn)("px-6",t),...r})}},7764:(e,t,r)=>{r.d(t,{Y:()=>o});var a=r(63),i=r(6199),s=r(2115);function o(){let{data:e}=(0,i.wV)(),t=(0,a.usePathname)(),[r,o]=(0,s.useState)({pageViews:0,timeOnSite:0,interactions:0,previousPrompts:0}),[n,l]=(0,s.useState)({showPrompt:!1,trigger:"value-based",context:"general",priority:0});(0,s.useEffect)(()=>{if(e)return;let t=Date.now(),a=0,i=localStorage.getItem("user-behavior");if(i){let e=JSON.parse(i);o(t=>({...t,...e,lastVisit:new Date(e.lastVisit)}))}o(e=>({...e,pageViews:e.pageViews+1}));let s=()=>{a++,o(e=>({...e,interactions:e.interactions+1}))};document.addEventListener("click",s),document.addEventListener("scroll",s,{once:!0}),document.addEventListener("keydown",s);let n=setInterval(()=>{o(e=>({...e,timeOnSite:e.timeOnSite+1}))},1e3);return()=>{clearInterval(n),document.removeEventListener("click",s),document.removeEventListener("scroll",s),document.removeEventListener("keydown",s);let e={...r,timeOnSite:r.timeOnSite+Math.floor((Date.now()-t)/1e3),interactions:r.interactions+a,lastVisit:new Date};localStorage.setItem("user-behavior",JSON.stringify(e))}},[e,t]);let d=(0,s.useCallback)(()=>{if(e||r.previousPrompts>=3)return{showPrompt:!1,trigger:"value-based",context:"general",priority:0};let a={"/quote":{trigger:"action-based",context:"quote",priority:9},"/consultation":{trigger:"time-based",context:"consultation",priority:8},"/dashboard":{trigger:"value-based",context:"dashboard",priority:7},"/profile":{trigger:"value-based",context:"profile",priority:6}}[t]||{trigger:"time-based",context:"general",priority:3};return{showPrompt:r.pageViews<=2&&r.timeOnSite<30?a.priority>5:r.interactions>=3?"action-based"===a.trigger:r.timeOnSite>=30?"time-based"===a.trigger:a.priority>=7&&"value-based"===a.trigger,trigger:a.trigger,context:a.context,priority:a.priority}},[r,t,e]);(0,s.useEffect)(()=>{l(d())},[d]);let c=(0,s.useCallback)(()=>{l(e=>({...e,showPrompt:!1})),o(e=>({...e,previousPrompts:e.previousPrompts+1}));let e=JSON.parse(localStorage.getItem("user-behavior")||"{}");e.previousPrompts=(e.previousPrompts||0)+1,localStorage.setItem("user-behavior",JSON.stringify(e))},[]),u=(0,s.useCallback)(()=>{let e=.15;return r.interactions>=5?e+=.25:r.interactions>=3?e+=.15:r.interactions>=1&&(e+=.1),r.timeOnSite>=120?e+=.2:r.timeOnSite>=60?e+=.15:r.timeOnSite>=30&&(e+=.1),r.pageViews>=5?e+=.15:r.pageViews>=3&&(e+=.1),e-=.2*r.previousPrompts,n.priority>=8?e+=.1:n.priority>=6&&(e+=.05),Math.max(.05,Math.min(.85,e))},[r,n.priority]);return{strategy:n,userBehavior:r,dismissPrompt:c,conversionProbability:u()}}}}]);