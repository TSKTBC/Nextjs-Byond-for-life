(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{1244:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>E});var t=a(5155),l=a(3370),r=a(2115),i=a(9484),n=a(4269);function c(e){let{className:s,value:a,...l}=e;return(0,t.jsx)(i.bL,{"data-slot":"progress",className:(0,n.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...l,children:(0,t.jsx)(i.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})}var o=a(5775),d=a(5041),m=a(9867),x=a(5917),u=a(6046),h=a(5843),p=a(9141),b=a(6199),j=a(6083),g=a(4033);function f(e){let{...s}=e;return(0,t.jsx)(j.bL,{"data-slot":"accordion",...s})}function v(e){let{className:s,...a}=e;return(0,t.jsx)(j.q7,{"data-slot":"accordion-item",className:(0,n.cn)("border-b last:border-b-0",s),...a})}function N(e){let{className:s,children:a,...l}=e;return(0,t.jsx)(j.Y9,{className:"flex",children:(0,t.jsxs)(j.l9,{"data-slot":"accordion-trigger",className:(0,n.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",s),...l,children:[a,(0,t.jsx)(g.A,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function y(e){let{className:s,children:a,...l}=e;return(0,t.jsx)(j.UC,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...l,children:(0,t.jsx)("div",{className:(0,n.cn)("pt-0 pb-4",s),children:a})})}var w=a(1647),k=a(3998),C=a(6948);let P=0;function D(e){let{school:s,formData:a,result:l,onBack:i,onStartOver:n}=e,{data:c}=(0,b.wV)(),{toast:j}=function(){let[e,s]=(0,r.useState)([]);return{toast:(0,r.useCallback)(e=>{let{title:a,description:t,variant:l="default"}=e,r="toast-".concat(++P),i={id:r,title:a,description:t,variant:l};s(e=>[...e,i]),setTimeout(()=>{s(e=>e.filter(e=>e.id!==r))},5e3)},[]),toasts:e,dismiss:(0,r.useCallback)(e=>{s(s=>s.filter(s=>s.id!==e))},[])}}(),[g,D]=(0,r.useState)(!1),[S,M]=(0,r.useState)(!1),Z=e=>"\xa5".concat(e.toLocaleString()),T=async()=>{if(!c)return void j({title:"ログインが必要です",description:"見積もりを保存するにはログインしてください",variant:"destructive"});D(!0);try{let e=await fetch("/api/quotes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({schoolId:a.schoolId,weeks:a.weeks,startDate:a.startDate,accommodationType:a.accommodationType,options:a.options,totalAmount:l.total,currency:l.currency,exchangeRate:l.exchangeRate,breakdown:l.breakdown,validUntil:new Date(Date.now()+2592e6)})});if(e.ok)await e.json(),M(!0),j({title:"見積もりを保存しました",description:"ダッシュボードから後で確認できます",variant:"default"});else throw Error("Failed to save quote")}catch(e){console.error("Failed to save quote:",e),j({title:"保存に失敗しました",description:"しばらく時間をおいてから再度お試しください",variant:"destructive"})}finally{D(!1)}},$=e=>{switch(e){case"homestay":return"ホームステイ";case"dormitory":return"学生寮";case"apartment":return"アパートメント";case"none":return"自己手配";default:return e}};return(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 space-y-6 sm:space-y-8",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white rounded-2xl p-4 sm:p-8 text-center",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-3 sm:mb-4",children:"お見積結果"}),(0,t.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,t.jsx)("span",{className:"text-3xl sm:text-5xl font-bold block",children:Z(l.total)}),l.discounts>0&&(0,t.jsxs)(w.E,{variant:"secondary",className:"mt-2 sm:mt-0 sm:ml-4 bg-green-100 text-green-800",children:[Z(l.discounts),"お得!"]})]}),(0,t.jsxs)("div",{className:"text-base sm:text-lg opacity-90 px-2",children:[s.name," | ",a.weeks,"週間 | ",$(a.accommodationType)]}),(0,t.jsxs)("div",{className:"text-xs sm:text-sm opacity-75 mt-2",children:[(0,o.GP)(a.startDate,"yyyy年M月d日",{locale:d.ja}),"開始"]})]}),(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{children:(0,t.jsx)(C.ZB,{children:"学校情報"})}),(0,t.jsx)(C.Wu,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-lg mb-2",children:s.name}),(0,t.jsxs)("p",{className:"text-gray-600 mb-2",children:[s.city,", ",s.country]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:s.description})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"期間:"}),(0,t.jsxs)("span",{className:"font-medium",children:[a.weeks,"週間"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"開始日:"}),(0,t.jsx)("span",{className:"font-medium",children:(0,o.GP)(a.startDate,"yyyy/M/d",{locale:d.ja})})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"宿泊タイプ:"}),(0,t.jsx)("span",{className:"font-medium",children:$(a.accommodationType)})]})]})]})})]}),(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{children:(0,t.jsx)(C.ZB,{children:"料金内訳"})}),(0,t.jsxs)(C.Wu,{children:[(0,t.jsx)(f,{type:"single",collapsible:!0,className:"w-full",children:l.breakdown.map((e,s)=>(0,t.jsxs)(v,{value:"category-".concat(s),children:[(0,t.jsx)(N,{children:(0,t.jsxs)("div",{className:"flex justify-between w-full mr-4",children:[(0,t.jsx)("span",{children:e.category}),(0,t.jsx)("span",{className:"font-semibold",children:Z(e.subtotal)})]})}),(0,t.jsx)(y,{children:(0,t.jsx)("div",{className:"space-y-2 pt-2",children:e.items.map((e,s)=>(0,t.jsxs)("div",{className:"flex justify-between py-1 border-b border-gray-100 last:border-0",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[e.name," ",e.unit&&"(".concat(e.unit,")")]}),(0,t.jsx)("span",{className:"text-sm font-medium",children:Z(e.amount)})]},s))})})]},s))}),(0,t.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-lg font-semibold",children:"合計"}),(0,t.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:Z(l.total)})]})})]})]}),(0,t.jsx)(C.Zp,{className:"bg-amber-50 border-amber-200",children:(0,t.jsx)(C.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)("div",{className:"bg-amber-100 rounded-full p-1",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-amber-800",children:"為替レートについて"}),(0,t.jsxs)("p",{className:"text-sm text-amber-700 mt-1",children:["1 ",l.currency," = \xa5",l.exchangeRate," で計算しています。 為替レートは日々変動するため、実際の金額は申込み時のレートによって変わります。"]})]})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[(0,t.jsx)(k.$,{variant:"outline",className:"h-auto p-4 hover:bg-blue-50 border-2 hover:border-blue-200 transition-all duration-300 group",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 mx-auto mb-2 bg-blue-100 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:(0,t.jsx)(m.A,{className:"h-4 w-4 text-blue-600"})}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"見積書PDF"})]})}),(0,t.jsx)(k.$,{variant:S?"default":"outline",className:"h-auto p-4 border-2 transition-all duration-300 group ".concat(S?"bg-green-500 hover:bg-green-600 border-green-500":"hover:bg-green-50 hover:border-green-200"),onClick:T,disabled:g||S,children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 mx-auto mb-2 rounded-full flex items-center justify-center transition-colors ".concat(S?"bg-white/20":"bg-green-100 group-hover:bg-green-200"),children:S?(0,t.jsx)(x.A,{className:"h-4 w-4 text-white"}):(0,t.jsx)(u.A,{className:"h-4 w-4 text-green-600"})}),(0,t.jsx)("div",{className:"text-sm font-medium ".concat(S?"text-white":""),children:g?"保存中...":S?"保存済み":"見積を保存"})]})}),(0,t.jsx)(k.$,{variant:"outline",className:"h-auto p-4 hover:bg-purple-50 border-2 hover:border-purple-200 transition-all duration-300 group",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 mx-auto mb-2 bg-purple-100 rounded-full flex items-center justify-center group-hover:bg-purple-200 transition-colors",children:(0,t.jsx)(h.A,{className:"h-4 w-4 text-purple-600"})}),(0,t.jsx)("div",{className:"text-sm font-medium",children:"他校と比較"})]})}),(0,t.jsx)(k.$,{className:"h-auto p-4 bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 border-0 shadow-lg hover:shadow-xl transition-all duration-300 group",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-8 h-8 mx-auto mb-2 bg-white/20 rounded-full flex items-center justify-center group-hover:bg-white/30 transition-colors",children:(0,t.jsx)(p.A,{className:"h-4 w-4 text-white"})}),(0,t.jsx)("div",{className:"text-sm font-medium text-white",children:"無料相談"})]})})]}),(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{children:(0,t.jsx)(C.ZB,{children:"おすすめの次のステップ"})}),(0,t.jsxs)(C.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"text-green-500 text-xl",children:"✅"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:"無料相談で詳しく説明"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"ビザ・保険・現地サポートなど、気になる点をプロに相談できます"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("div",{className:"text-orange-500 text-xl",children:"⏰"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold",children:"見積の有効期限は7日間"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"為替変動リスクを避けるため、お早めのご検討をおすすめします"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)(k.$,{variant:"outline",onClick:i,className:"flex-1",children:"前のステップに戻る"}),(0,t.jsx)(k.$,{variant:"outline",onClick:n,className:"flex-1",children:"最初からやり直す"}),(0,t.jsx)(k.$,{className:"flex-1 bg-blue-600 hover:bg-blue-700",children:"この条件で相談予約"})]})]})}var S=a(3026);function M(e){let{className:s,defaultValue:a,value:l,min:i=0,max:c=100,...o}=e,d=r.useMemo(()=>Array.isArray(l)?l:Array.isArray(a)?a:[i,c],[l,a,i,c]);return(0,t.jsxs)(S.bL,{"data-slot":"slider",defaultValue:a,value:l,min:i,max:c,className:(0,n.cn)("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",s),...o,children:[(0,t.jsx)(S.CC,{"data-slot":"slider-track",className:(0,n.cn)("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,t.jsx)(S.Q6,{"data-slot":"slider-range",className:(0,n.cn)("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(e,s)=>(0,t.jsx)(S.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},s))]})}function Z(e){let{data:s,onUpdate:a,onNext:l}=e,[i,n]=(0,r.useState)(s.weeks||12);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"留学期間を選んでください"}),(0,t.jsx)("p",{className:"text-gray-600",children:"希望する留学期間を設定してください。長期になるほど、週あたりの費用が安くなります。"})]}),(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{children:(0,t.jsx)(C.ZB,{className:"text-center text-3xl font-bold text-blue-600",children:(e=>{if(e<4)return"".concat(e,"週間");let s=Math.round(e/4);return"".concat(e,"週間 (約").concat(s,"ヶ月)")})(i)})}),(0,t.jsx)(C.Wu,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(M,{value:[i],onValueChange:e=>n(e[0]),min:2,max:52,step:1,className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,t.jsx)("span",{children:"2週間"}),(0,t.jsx)("span",{children:"1年 (52週間)"})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[{weeks:4,label:"1ヶ月"},{weeks:12,label:"3ヶ月"},{weeks:24,label:"半年"},{weeks:48,label:"1年"}].map(e=>(0,t.jsx)(k.$,{variant:i===e.weeks?"default":"outline",size:"sm",onClick:()=>n(e.weeks),className:"text-xs",children:e.label},e.weeks))})]})})]}),(0,t.jsx)(C.Zp,{className:"bg-blue-50 border-blue-200",children:(0,t.jsx)(C.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-blue-700 mb-2",children:"概算費用（目安）"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:(e=>{let s=1e4*Math.floor(5e4*e*.8/1e4),a=1e4*Math.floor(5e4*e*1.3/1e4);return"\xa5".concat(s.toLocaleString()," - \xa5").concat(a.toLocaleString())})(i)}),(0,t.jsx)("p",{className:"text-xs text-blue-600 mt-2",children:"※ 学費・宿泊費・諸費用込み。為替レートにより変動します。"})]})})}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(k.$,{variant:"outline",disabled:!0,children:"戻る"}),(0,t.jsx)(k.$,{onClick:()=>{a({weeks:i}),l()},children:"次へ：開始時期を選ぶ"})]})]})}var T=a(5513);function $(e){let{data:s,onUpdate:a,onNext:l,onBack:i}=e,[n,c]=(0,r.useState)(s.startDate||(0,T.P)(new Date,2)),m=[{date:(0,T.P)(new Date,1),label:"来月"},{date:(0,T.P)(new Date,2),label:"2ヶ月後"},{date:(0,T.P)(new Date,3),label:"3ヶ月後"},{date:(0,T.P)(new Date,6),label:"半年後"}],x=(e=>{let s=e.getMonth()+1;return s>=3&&s<=5?{season:"春",color:"text-green-600",info:"新学期シーズン。新しいクラスメイトと出会えます。"}:s>=6&&s<=8?{season:"夏",color:"text-orange-600",info:"夏休みシーズン。観光やアクティビティが豊富です。"}:s>=9&&s<=11?{season:"秋",color:"text-amber-600",info:"新学期シーズン。勉強に集中できる季節です。"}:{season:"冬",color:"text-blue-600",info:"年末年始を海外で過ごせます。クリスマスイベント等があります。"}})(n);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"開始時期を選んでください"}),(0,t.jsx)("p",{className:"text-gray-600",children:"留学開始希望日を選択してください。早期申込み割引の対象期間もあります。"})]}),(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{children:(0,t.jsxs)(C.ZB,{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:(0,o.GP)(n,"yyyy年M月d日",{locale:d.ja})}),(0,t.jsxs)("div",{className:"text-lg ".concat(x.color),children:[x.season,"シーズン"]})]})}),(0,t.jsx)(C.Wu,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:m.map((e,s)=>(0,t.jsx)(k.$,{variant:(0,o.GP)(n,"yyyy-MM-dd")===(0,o.GP)(e.date,"yyyy-MM-dd")?"default":"outline",onClick:()=>c(e.date),className:"h-auto p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"font-semibold",children:e.label}),(0,t.jsx)("div",{className:"text-xs opacity-70",children:(0,o.GP)(e.date,"M/d",{locale:d.ja})})]})},s))}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"または、具体的な日付を入力"}),(0,t.jsx)("input",{type:"date",value:(0,o.GP)(n,"yyyy-MM-dd"),onChange:e=>c(new Date(e.target.value)),min:(0,o.GP)((0,T.P)(new Date,1),"yyyy-MM-dd"),max:(0,o.GP)((0,T.P)(new Date,12),"yyyy-MM-dd"),className:"w-full p-3 border border-gray-300 rounded-lg"})]})]})})]}),(0,t.jsx)(C.Zp,{className:"bg-amber-50 border-amber-200",children:(0,t.jsx)(C.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-amber-700 mb-2",children:"この時期について"}),(0,t.jsx)("p",{className:"text-amber-900",children:x.info})]})})}),n>(0,T.P)(new Date,3)&&(0,t.jsx)(C.Zp,{className:"bg-green-50 border-green-200",children:(0,t.jsx)(C.Wu,{className:"pt-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm text-green-700 mb-2",children:"\uD83C\uDF89 早期申込み割引対象"}),(0,t.jsxs)("p",{className:"text-green-900",children:["3ヶ月以上前のお申込みで",(0,t.jsx)("strong",{children:"5%割引"}),"が適用されます！"]})]})})}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(k.$,{variant:"outline",onClick:i,children:"戻る"}),(0,t.jsx)(k.$,{onClick:()=>{a({startDate:n}),l()},children:"次へ：宿泊・オプションを選ぶ"})]})]})}function B(e){var s;let{school:a,data:l,onUpdate:i,onNext:n,onBack:c}=e,[o,d]=(0,r.useState)(l.accommodationType||"homestay"),[m,x]=(0,r.useState)(l.options||{}),u=[{value:"homestay",label:"ホームステイ",description:"現地家庭で生活。語学力向上に最適",price:a.pricing.accommodation.homestay.price,popular:!0,benefits:["現地文化を体験","24時間英語環境","食事付き"]},{value:"dormitory",label:"学生寮",description:"他国の学生と交流。友達作りやすい",price:a.pricing.accommodation.dormitory.price,popular:!1,benefits:["国際的な友達","学校まで近い","イベント豊富"]},{value:"apartment",label:"アパートメント",description:"プライベート重視。自炊可能",price:a.pricing.accommodation.apartment.price,popular:!1,benefits:["プライバシー確保","自炊可能","自由度が高い"]},{value:"none",label:"自分で手配",description:"宿泊先は自己手配",price:0,popular:!1,benefits:["完全自由","コスト調整可能","場所を自由選択"]}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"宿泊とオプションを選んでください"}),(0,t.jsx)("p",{className:"text-gray-600",children:"宿泊タイプと追加オプションを選択してください。後から変更も可能です。"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"宿泊タイプ"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(e=>(0,t.jsxs)(C.Zp,{className:"cursor-pointer transition-all hover:shadow-md ".concat(o===e.value?"ring-2 ring-blue-500 bg-blue-50":""),onClick:()=>d(e.value),children:[(0,t.jsxs)(C.aR,{className:"pb-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(C.ZB,{className:"text-lg",children:e.label}),e.popular&&(0,t.jsx)(w.E,{className:"bg-orange-100 text-orange-800",children:"人気"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,t.jsx)(C.Wu,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("span",{className:"text-xl font-bold text-blue-600",children:0===e.price?"\xa50":"\xa5".concat(e.price.toLocaleString())}),e.price>0&&(0,t.jsx)("span",{className:"text-sm text-gray-500",children:"/週"})]}),(0,t.jsx)("ul",{className:"space-y-1",children:e.benefits.map((e,s)=>(0,t.jsxs)("li",{className:"flex items-center text-xs text-gray-600",children:[(0,t.jsx)("span",{className:"w-1 h-1 bg-blue-400 rounded-full mr-2"}),e]},s))})]})})]},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"追加オプション（任意）"}),(0,t.jsx)("div",{className:"space-y-3",children:[{key:"airportPickup",label:"空港送迎",price:15e3,description:"到着時の空港から宿泊先までの送迎サービス"},{key:"insurance",label:"海外保険",price:5e3,description:"留学期間中の医療・傷害保険（週あたり）",unit:"週"},{key:"examPrep",label:"試験対策コース",price:2e4,description:"TOEIC/IELTS等の試験対策専門クラス（追加）"}].map(e=>(0,t.jsx)(C.Zp,{className:"cursor-pointer transition-all ".concat(m[e.key]?"bg-blue-50 border-blue-200":""),onClick:()=>{var s;return s=e.key,void x(e=>({...e,[s]:!e[s]}))},children:(0,t.jsx)(C.Wu,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 rounded flex items-center justify-center ".concat(m[e.key]?"bg-blue-500 border-blue-500":"border-gray-300"),children:m[e.key]&&(0,t.jsx)("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium",children:e.label}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("span",{className:"font-semibold text-blue-600",children:["\xa5",e.price.toLocaleString()]}),e.unit&&(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:["/",e.unit]})]})]})})},e.key))})]}),(0,t.jsx)(C.Zp,{className:"bg-gray-50",children:(0,t.jsxs)(C.Wu,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-medium mb-3",children:"選択内容サマリー"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"宿泊タイプ:"}),(0,t.jsx)("span",{className:"font-medium",children:null==(s=u.find(e=>e.value===o))?void 0:s.label})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"追加オプション:"}),(0,t.jsxs)("span",{className:"font-medium",children:[Object.keys(m).filter(e=>m[e]).length||0,"件"]})]})]})]})}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(k.$,{variant:"outline",onClick:c,children:"戻る"}),(0,t.jsx)(k.$,{onClick:()=>{i({accommodationType:o,options:m}),n()},children:"次へ：連絡先を入力"})]})]})}var R=a(5142),W=a(6444);function A(e){let{data:s,onUpdate:a,onNext:l,onSkip:i,onBack:n,isCalculating:c}=e,[o,d]=(0,r.useState)(s.email||""),[m,x]=(0,r.useState)(s.name||""),[u,h]=(0,r.useState)(s.phone||"");return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"連絡先情報（任意）"}),(0,t.jsx)("p",{className:"text-gray-600",children:"メールアドレスを入力すると、見積結果を保存・共有できます。また、詳細な留学相談も可能になります。"})]}),(0,t.jsxs)(C.Zp,{children:[(0,t.jsx)(C.aR,{children:(0,t.jsx)(C.ZB,{className:"text-lg",children:"連絡先情報を入力"})}),(0,t.jsxs)(C.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(W.J,{htmlFor:"email",children:"メールアドレス"}),(0,t.jsx)(R.p,{id:"email",type:"email",placeholder:"your@email.com",value:o,onChange:e=>d(e.target.value),className:"mt-1"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"見積結果の保存や今後の相談でご連絡いたします"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(W.J,{htmlFor:"name",children:"お名前（任意）"}),(0,t.jsx)(R.p,{id:"name",placeholder:"山田 太郎",value:m,onChange:e=>x(e.target.value),className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(W.J,{htmlFor:"phone",children:"電話番号（任意）"}),(0,t.jsx)(R.p,{id:"phone",placeholder:"090-1234-5678",value:u,onChange:e=>h(e.target.value),className:"mt-1"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"緊急時の連絡や電話相談でのみ使用します"})]})]})]}),(0,t.jsx)(C.Zp,{className:"bg-blue-50 border-blue-200",children:(0,t.jsxs)(C.Wu,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"メール登録のメリット"}),(0,t.jsxs)("ul",{className:"space-y-1 text-sm text-blue-800",children:[(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"w-1 h-1 bg-blue-500 rounded-full mr-2"}),"見積結果をPDFでダウンロード・保存"]}),(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"w-1 h-1 bg-blue-500 rounded-full mr-2"}),"見積を家族や友人と簡単に共有"]}),(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"w-1 h-1 bg-blue-500 rounded-full mr-2"}),"専任カウンセラーによる無料相談"]}),(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"w-1 h-1 bg-blue-500 rounded-full mr-2"}),"最新の留学情報・キャンペーン情報"]})]})]})}),(0,t.jsx)(C.Zp,{className:"bg-gray-50",children:(0,t.jsxs)(C.Wu,{className:"p-4",children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"プライバシーについて"}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["ご入力いただいた情報は、見積の保存・提供と留学相談のみに使用し、 第三者への提供や営業目的での利用は一切行いません。 詳しくは",(0,t.jsx)("a",{href:"/privacy",className:"text-blue-600 underline",children:"プライバシーポリシー"}),"をご確認ください。"]})]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsx)(k.$,{variant:"outline",onClick:n,disabled:c,children:"戻る"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 flex-1",children:[(0,t.jsx)(k.$,{variant:"outline",onClick:()=>{a({email:"",name:"",phone:""}),i()},disabled:c,className:"flex-1",children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"計算中..."]}):"スキップして結果を見る"}),(0,t.jsx)(k.$,{onClick:()=>{a({email:o,name:m,phone:u}),l()},disabled:c||!o,className:"flex-1",children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"計算中..."]}):"保存して結果を見る"})]})]})]})}function z(e){let{school:s}=e,[a,l]=(0,r.useState)(1),[i,n]=(0,r.useState)({schoolId:s.id,weeks:12,accommodationType:"homestay",options:{}}),[o,d]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),u=()=>{a<4?l(a+1):p()},h=()=>{a>1&&l(a-1)},p=async()=>{x(!0);try{await new Promise(e=>setTimeout(e,1500));let e="homestay"===i.accommodationType?s.pricing.accommodation.homestay.price:"dormitory"===i.accommodationType?s.pricing.accommodation.dormitory.price:"apartment"===i.accommodationType?s.pricing.accommodation.apartment.price:0,a={tuition:i.weeks*s.pricing.basePrice,accommodation:i.weeks*e,fees:s.pricing.fees.registration+s.pricing.fees.materials+s.pricing.fees.technology,options:5e3*Object.keys(i.options||{}).length,subtotal:0,discounts:0,total:0,currency:s.pricing.currency,exchangeRate:150,breakdown:[{category:"学費",items:[{name:"授業料",amount:i.weeks*s.pricing.basePrice,unit:"".concat(i.weeks,"週")}],subtotal:i.weeks*s.pricing.basePrice},{category:"宿泊費",items:[{name:"homestay"===i.accommodationType?"ホームステイ":"dormitory"===i.accommodationType?"学生寮":"アパートメント",amount:i.weeks*e,unit:"".concat(i.weeks,"週")}],subtotal:i.weeks*e}]};a.subtotal=a.tuition+a.accommodation+a.fees+a.options,a.total=a.subtotal-a.discounts,d(a),l(5)}catch(e){console.error("見積計算に失敗しました:",e)}finally{x(!1)}},b=e=>{n(s=>({...s,...e}))};return 5===a&&o?(0,t.jsx)(D,{school:s,formData:i,result:o,onBack:()=>l(4),onStartOver:()=>{l(1),d(null)}}):(0,t.jsxs)("div",{className:"max-w-2xl mx-auto p-4 sm:p-6",children:[(0,t.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Step ",a," of ",4]}),(0,t.jsxs)("span",{className:"text-sm text-gray-600",children:[Math.round(a/4*100),"%"]})]}),(0,t.jsx)(c,{value:a/4*100,className:"h-2"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg mb-6 sm:mb-8",children:[(0,t.jsx)("h2",{className:"text-base sm:text-lg font-semibold text-blue-900",children:s.name}),(0,t.jsxs)("p",{className:"text-sm sm:text-base text-blue-700",children:[s.city,", ",s.country]})]}),1===a&&(0,t.jsx)(Z,{data:i,onUpdate:b,onNext:u,onBack:h}),2===a&&(0,t.jsx)($,{data:i,onUpdate:b,onNext:u,onBack:h}),3===a&&(0,t.jsx)(B,{school:s,data:i,onUpdate:b,onNext:u,onBack:h}),4===a&&(0,t.jsx)(A,{data:i,onUpdate:b,onNext:u,onSkip:p,onBack:h,isCalculating:m})]})}var F=a(7764);let L={id:"school-1",name:"Toronto Language Academy",country:"Canada",city:"Toronto",description:"トロントの中心部にある国際的な語学学校。少人数制クラスで質の高い授業を提供。",images:["/images/schools/toronto-academy-1.jpg","/images/schools/toronto-academy-2.jpg"],pricing:{basePrice:350,currency:"CAD",fees:{registration:150,materials:50,technology:25},accommodation:{homestay:{price:280,deposit:200},dormitory:{price:320,deposit:300},apartment:{price:450,deposit:500}}}};function E(){let{strategy:e,dismissPrompt:s}=(0,F.Y)();return(0,t.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 py-8 relative overflow-hidden",children:[(0,t.jsxs)("div",{className:"absolute inset-0",children:[(0,t.jsx)("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-emerald-300/20 to-teal-300/20 rounded-full blur-3xl -translate-y-32 translate-x-32"}),(0,t.jsx)("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-tr from-cyan-300/20 to-emerald-300/20 rounded-full blur-3xl translate-y-32 -translate-x-32"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-white/30 to-transparent"})]}),(0,t.jsxs)("div",{className:"max-w-6xl mx-auto px-4 relative z-10",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-3xl mb-6 shadow-2xl transform hover:scale-110 transition-transform duration-300",children:(0,t.jsx)("span",{className:"text-3xl text-white animate-bounce",children:"\uD83D\uDCB0"})}),(0,t.jsx)("h1",{className:"text-4xl font-extrabold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent mb-4",children:"留学費用を見積もりしましょう"}),(0,t.jsx)("p",{className:"text-lg text-gray-700 font-medium",children:"✨ 4つの簡単なステップで、正確な留学費用を計算できます"})]}),(0,t.jsx)(z,{school:L}),e.showPrompt&&(0,t.jsx)(l.t,{trigger:e.trigger,context:e.context,onDismiss:s})]})]})}},1647:(e,s,a)=>{"use strict";a.d(s,{E:()=>c});var t=a(5155),l=a(2467),r=a(3101);a(2115);var i=a(4269);let n=(0,r.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:s,variant:a,asChild:r=!1,...c}=e,o=r?l.DX:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,i.cn)(n({variant:a}),s),...c})}},5142:(e,s,a)=>{"use strict";a.d(s,{p:()=>r});var t=a(5155);a(2115);var l=a(4269);function r(e){let{className:s,type:a,...r}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,l.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...r})}},6444:(e,s,a)=>{"use strict";a.d(s,{J:()=>i});var t=a(5155),l=a(489);a(2115);var r=a(4269);function i(e){let{className:s,...a}=e;return(0,t.jsx)(l.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}},8408:(e,s,a)=>{Promise.resolve().then(a.bind(a,1244))}},e=>{e.O(0,[707,619,199,158,900,306,189,441,493,358],()=>e(e.s=8408)),_N_E=e.O()}]);