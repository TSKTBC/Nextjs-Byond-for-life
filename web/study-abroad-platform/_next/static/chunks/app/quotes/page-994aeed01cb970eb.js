(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[978],{1360:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1647:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var a=r(5155),s=r(2467),i=r(3101);r(2115);var n=r(4269);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,asChild:i=!1,...o}=e,d=i?s.DX:"span";return(0,a.jsx)(d,{"data-slot":"badge",className:(0,n.cn)(l({variant:r}),t),...o})}},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:h,...u}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:o?24*Number(l)/Number(s):l,className:i("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:o,...d}=r;return(0,a.createElement)(l,{ref:n,iconNode:t,className:i("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return r.displayName=s(e),r}},1873:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3785:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var a=r(5155),s=r(5775),i=r(5041),n=r(6191),l=r(9715),o=r(1873),d=r(6485),c=r(6983),h=r(7828),u=r(9867),x=r(1360),m=r(2619),g=r.n(m),v=r(63),p=r(6199),b=r(2115),f=r(1647),y=r(3998),j=r(6948);let w={DRAFT:"下書き",SAVED:"保存済み",SHARED:"共有済み",CONVERTED:"申込み済み"},N={DRAFT:"bg-gray-100 text-gray-800",SAVED:"bg-blue-100 text-blue-800",SHARED:"bg-green-100 text-green-800",CONVERTED:"bg-purple-100 text-purple-800"},k={homestay:"ホームステイ",dormitory:"学生寮",apartment:"アパートメント",none:"自己手配"};function A(){let{data:e,status:t}=(0,p.wV)(),[r,m]=(0,b.useState)([]),[A,D]=(0,b.useState)(!0),[E,M]=(0,b.useState)("");(0,b.useEffect)(()=>{"unauthenticated"===t&&(0,v.redirect)("/auth/signin"),"authenticated"===t&&C()},[t]);let C=async()=>{try{let e=await fetch("/api/quotes");if(e.ok){let t=await e.json();m(t.quotes)}else M("見積もりの取得に失敗しました")}catch(e){M("見積もりの取得に失敗しました"),console.error("Failed to fetch quotes:",e)}finally{D(!1)}},z=async e=>{if(confirm("この見積もりを削除してもよろしいですか？"))try{(await fetch("/api/quotes/".concat(e),{method:"DELETE"})).ok?m(r.filter(t=>t.id!==e)):alert("削除に失敗しました")}catch(e){alert("削除に失敗しました"),console.error("Failed to delete quote:",e)}};return"loading"===t||A?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"読み込み中..."})]})}):("unauthenticated"===t&&(0,v.redirect)("/auth/signin"),(0,a.jsx)("main",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"保存済み見積もり"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"過去に作成した見積もりの一覧です。"})]}),(0,a.jsx)(y.$,{asChild:!0,children:(0,a.jsxs)(g(),{href:"/quote",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"新しい見積もり"]})})]}),E&&(0,a.jsx)(j.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,a.jsx)(j.Wu,{className:"p-4",children:(0,a.jsx)("p",{className:"text-red-600",children:E})})}),0===r.length?(0,a.jsx)(j.Zp,{children:(0,a.jsxs)(j.Wu,{className:"text-center py-12",children:[(0,a.jsx)(l.A,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"保存済み見積もりがありません"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"まずは見積もりを作成してみましょう。"}),(0,a.jsx)(y.$,{asChild:!0,children:(0,a.jsxs)(g(),{href:"/quote",children:[(0,a.jsx)(n.A,{className:"h-4 w-4 mr-2"}),"見積もりを作成"]})})]})}):(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:r.map(e=>{let t;return(0,a.jsxs)(j.Zp,{className:"hover:shadow-xl transition-all duration-300 border-0 shadow-lg bg-gradient-to-br from-white to-gray-50 group",children:[(0,a.jsxs)(j.aR,{className:"pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)(f.E,{className:"".concat(N[e.status]," border border-white/20 shadow-sm"),children:w[e.status]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:(0,s.GP)(new Date(e.createdAt),"M/d",{locale:i.ja})})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"\uD83C\uDFEB"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(j.ZB,{className:"text-lg line-clamp-2 group-hover:text-blue-600 transition-colors",children:e.school.name}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-1"}),(0,a.jsxs)("span",{children:[e.school.city,", ",e.school.country]})]})]})]})]}),(0,a.jsxs)(j.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:(t=e.totalAmount,"\xa5".concat(Math.round(t).toLocaleString()))}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[e.weeks,"週間 | ",k[e.accommodationType]]})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"開始予定:"]}),(0,a.jsx)("span",{children:(0,s.GP)(new Date(e.startDate),"yyyy/M/d",{locale:i.ja})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"有効期限:"]}),(0,a.jsx)("span",{className:new Date(e.validUntil)<new Date?"text-red-600":"",children:(0,s.GP)(new Date(e.validUntil),"M/d",{locale:i.ja})})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,a.jsxs)(y.$,{size:"sm",variant:"outline",className:"flex-1",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-1"}),"詳細"]}),(0,a.jsx)(y.$,{size:"sm",variant:"outline",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})}),(0,a.jsx)(y.$,{size:"sm",variant:"outline",onClick:()=>z(e.id),className:"text-red-600 hover:text-red-700",children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})]})]})]},e.id)})}),(0,a.jsx)(j.Zp,{className:"mt-8 bg-blue-50 border-blue-200",children:(0,a.jsxs)(j.Wu,{className:"p-6",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 ヒント"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• 見積もりの有効期限は作成から30日間です"}),(0,a.jsx)("li",{children:"• 期限切れの見積もりも履歴として残ります"}),(0,a.jsx)("li",{children:"• 詳細ページから再計算や修正ができます"})]})]})})]})}))}},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var a=r(5155),s=r(2467),i=r(3101);r(2115);var n=r(4269);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive active:scale-95 hover:scale-[1.02]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",brand:"bg-gradient-to-r from-indigo-600 to-blue-500 text-white shadow-sm hover:from-indigo-500 hover:to-blue-400 focus-visible:ring-indigo-300",gradient:"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg hover:shadow-xl hover:from-blue-600 hover:to-purple-700 transform hover:-translate-y-0.5 transition-all duration-300",success:"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg hover:shadow-xl hover:from-emerald-600 hover:to-green-700 transform hover:-translate-y-0.5 transition-all duration-300",warning:"bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-lg hover:shadow-xl hover:from-amber-600 hover:to-orange-700 transform hover:-translate-y-0.5 transition-all duration-300",premium:"bg-gradient-to-r from-violet-500 to-purple-600 text-white shadow-2xl hover:shadow-3xl hover:from-violet-600 hover:to-purple-700 transform hover:scale-105 hover:-translate-y-1 transition-all duration-300 border border-white/20",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",xl:"h-12 rounded-lg px-8 text-base has-[>svg]:px-6",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:r,size:i,asChild:o=!1,...d}=e,c=o?s.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,n.cn)(l({variant:r,size:i,className:t})),...d})}},4269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(2821),s=r(5889);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6485:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},6948:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>o,ZB:()=>l,Zp:()=>i,aR:()=>n});var a=r(5155);r(2115);var s=r(4269);function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}},7828:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8287:(e,t,r)=>{Promise.resolve().then(r.bind(r,3785))},9715:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},e=>{e.O(0,[707,619,199,900,441,493,358],()=>e(e.s=8287)),_N_E=e.O()}]);